#!/usr/bin/env bash
# Простая обёртка для nmap. Нужен установленный nmap.
# usage: ./run_nmap.sh <target> [output_dir]
TARGET=$1
OUTDIR=${2:-results}
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
XMLFILE="$OUTDIR/scan_$TIMESTAMP.xml"

if [ -z "$TARGET" ]; then
  echo "Usage: $0 <target> [output_dir]"
  exit 1
fi

mkdir -p "$OUTDIR"
echo "[*] Running safe nmap scan on $TARGET (basic discovery only)"
# запуск базового безопасного сканирования
nmap -sS -sV -O -oX "$XMLFILE" "$TARGET"

echo "[*] Saved XML results to $XMLFILE"
